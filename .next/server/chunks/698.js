"use strict";exports.id=698,exports.ids=[698],exports.modules={78698:(e,t,i)=>{i.r(t),i.d(t,{Editor:()=>q,EditorWithStore:()=>EditorWithStore});var a=i(30784),n=i(47845),s=i(9885),l=i.n(s),r=i(63417);function getUid(){return Math.random().toString(36).substring(2,9)}function isHtmlVideoElement(e){return!!e&&"VIDEO"===e.tagName}function isHtmlImageElement(e){return!!e&&"IMG"===e.tagName}function isHtmlAudioElement(e){return!!e&&"AUDIO"===e.tagName}function formatTimeToMinSec(e){return`${Math.floor(e/60)}:${appendZero(Math.floor(e%60),2)}`}function formatTimeToMinSecMili(e){let t=Math.floor(e%1e3/10);return formatTimeToMinSec(e/1e3)+`.${appendZero(t,2)}`}function appendZero(e,t=2){return e.toString().padStart(t,"0")}var o=i(96995),d=i.n(o);let c=n.fabric.util.createClass(n.fabric.Image,{type:"coverImage",customFilter:"none",disableCrop:!1,cropWidth:0,cropHeight:0,initialize(e,t){t=t||{},t=Object.assign({cropHeight:this.height,cropWidth:this.width},t),this.callSuper("initialize",e,t)},getCrop(e,t){let i,a;let n=t.width,s=t.height,l=n/s,r=e.width/e.height;l>=r?(i=e.width,a=e.width/l):(i=e.height*l,a=e.height);let o=(e.width-i)/2,d=(e.height-a)/2;return{cropX:o,cropY:d,cropWidth:i,cropHeight:a}},_render(e){if(this.disableCrop){this.callSuper("_render",e);return}let t=this.width,i=this.height,a=this.getCrop(this.getOriginalSize(),{width:this.getScaledWidth(),height:this.getScaledHeight()}),{cropX:n,cropY:s,cropWidth:l,cropHeight:r}=a;e.save();let o=this.customFilter;e.filter=getFilterFromEffectType(o),e.drawImage(this._element,Math.max(n,0),Math.max(s,0),Math.max(1,l),Math.max(1,r),-t/2,-i/2,Math.max(0,t),Math.max(0,i)),e.filter="none",e.restore()}}),m=n.fabric.util.createClass(n.fabric.Image,{type:"coverVideo",customFilter:"none",disableCrop:!1,cropWidth:0,cropHeight:0,initialize(e,t){t=t||{},t=Object.assign({cropHeight:this.height,cropWidth:this.width},t),this.callSuper("initialize",e,t)},getCrop(e,t){let i,a;let n=t.width,s=t.height,l=n/s,r=e.width/e.height;l>=r?(i=e.width,a=e.width/l):(i=e.height*l,a=e.height);let o=(e.width-i)/2,d=(e.height-a)/2;return{cropX:o,cropY:d,cropWidth:i,cropHeight:a}},_render(e){if(this.disableCrop){this.callSuper("_render",e);return}let t=this.width,i=this.height,a=this.getCrop(this.getOriginalSize(),{width:this.getScaledWidth(),height:this.getScaledHeight()}),{cropX:n,cropY:s,cropWidth:l,cropHeight:r}=a,o=this._element,d=o.width/o.videoWidth,c=o.height/o.videoHeight;e.save();let m=this.customFilter;e.filter=getFilterFromEffectType(m),e.drawImage(this._element,Math.max(n,0)/d,Math.max(s,0)/c,Math.max(1,l)/d,Math.max(1,r)/c,-t/2,-i/2,Math.max(0,t),Math.max(0,i)),e.filter="none",e.restore()}});function getFilterFromEffectType(e){switch(e){case"blackAndWhite":return"grayscale(100%)";case"sepia":return"sepia(100%)";case"invert":return"invert(100%)";case"saturate":return"saturate(100%)";default:return"none"}}n.fabric.CoverImage=c,n.fabric.CoverVideo=m;let FabricUitls=class FabricUitls{static getClipMaskRect(e,t){let i=t/e.placement.scaleX,a=i/e.placement.scaleY,s=new n.fabric.Rect({left:e.placement.x-i,top:e.placement.y-a,width:e.placement.width+2*i,height:e.placement.height+2*a,scaleX:e.placement.scaleX,scaleY:e.placement.scaleY,absolutePositioned:!0,fill:"transparent",stroke:"transparent",opacity:.5,strokeWidth:0});return s}};var h=i(9336),p=i(14397);let Store_Store=class Store_Store{constructor(){this.possibleVideoFormats=["mp4","webm"],this.startedTime=0,this.startedTimePlay=0,this.canvas=null,this.videos=[],this.images=[],this.audios=[],this.editorElements=[],this.backgroundColor="#111111",this.maxTime=3e4,this.playing=!1,this.currentKeyFrame=0,this.selectedElement=null,this.fps=60,this.animations=[],this.animationTimeLine=d().timeline(),this.selectedMenuOption="Video",this.selectedVideoFormat="mp4",(0,r.makeAutoObservable)(this)}get currentTimeInMs(){return 1e3*this.currentKeyFrame/this.fps}setCurrentTimeInMs(e){this.currentKeyFrame=Math.floor(e/1e3*this.fps)}setSelectedMenuOption(e){this.selectedMenuOption=e}setCanvas(e){this.canvas=e,e&&(e.backgroundColor=this.backgroundColor)}setBackgroundColor(e){this.backgroundColor=e,this.canvas&&(this.canvas.backgroundColor=e)}updateEffect(e,t){let i=this.editorElements.findIndex(t=>t.id===e),a=this.editorElements[i];(isEditorVideoElement(a)||isEditorImageElement(a))&&(a.properties.effect=t),this.refreshElements()}setVideos(e){this.videos=e}addVideoResource(e){this.videos=[...this.videos,e]}addAudioResource(e){this.audios=[...this.audios,e]}addImageResource(e){this.images=[...this.images,e]}addAnimation(e){this.animations=[...this.animations,e],this.refreshAnimations()}updateAnimation(e,t){let i=this.animations.findIndex(t=>t.id===e);this.animations[i]=t,this.refreshAnimations()}refreshAnimations(){d().remove(this.animationTimeLine),this.animationTimeLine=d().timeline({duration:this.maxTime,autoplay:!1});for(let e=0;e<this.animations.length;e++){let t=this.animations[e],i=this.editorElements.find(e=>e.id===t.targetId),a=i?.fabricObject;if(i&&a)switch(a.clipPath=void 0,t.type){case"fadeIn":this.animationTimeLine.add({opacity:[0,1],duration:t.duration,targets:a,easing:"linear"},i.timeFrame.start);break;case"fadeOut":this.animationTimeLine.add({opacity:[1,0],duration:t.duration,targets:a,easing:"linear"},i.timeFrame.end-t.duration);break;case"slideIn":{let e=t.properties.direction,s={left:i.placement.x,top:i.placement.y},l={left:"left"===e?-i.placement.width:"right"===e?this.canvas?.width:i.placement.x,top:"top"===e?-i.placement.height:"bottom"===e?this.canvas?.height:i.placement.y};if(t.properties.useClipPath){let e=FabricUitls.getClipMaskRect(i,50);a.set("clipPath",e)}if("text"===i.type&&"character"===t.properties.textType){this.canvas?.remove(...i.properties.splittedTexts),i.properties.splittedTexts=function(e,t){let i=[],a=(e.text??"").split("").filter(e=>"\n"!==e),s=e.__charBounds;if(!s)return[];let l=s.map((e,t)=>e.slice(0,e.length-1).map(e=>({m:e,index:t}))).flat(),r=e.getHeightOfLine(0);for(let s=0;s<a.length;s++){if(!l[s])continue;let{m:o,index:d}=l[s],c=a[s],m=e.scaleX??1,h=e.scaleY??1,p=new n.fabric.Text(c,{left:o.left*m+t.placement.x,scaleX:m,scaleY:h,top:d*r*h+t.placement.y,fontSize:e.fontSize,fontWeight:e.fontWeight,fill:"#fff"});i.push(p)}return i}(i.fabricObject,i),i.properties.splittedTexts.forEach(e=>{this.canvas.add(e)});let e=t.duration/2,r=e/i.properties.splittedTexts.length;for(let t=0;t<i.properties.splittedTexts.length;t++){let a=i.properties.splittedTexts[t],n={left:a.left-i.placement.x,top:a.top-i.placement.y};this.animationTimeLine.add({left:[l.left+n.left,s.left+n.left],top:[l.top+n.top,s.top+n.top],delay:t*r,duration:e,targets:a},i.timeFrame.start)}this.animationTimeLine.add({opacity:[1,0],duration:1,targets:a,easing:"linear"},i.timeFrame.start),this.animationTimeLine.add({opacity:[0,1],duration:1,targets:a,easing:"linear"},i.timeFrame.start+t.duration),this.animationTimeLine.add({opacity:[0,1],duration:1,targets:i.properties.splittedTexts,easing:"linear"},i.timeFrame.start),this.animationTimeLine.add({opacity:[1,0],duration:1,targets:i.properties.splittedTexts,easing:"linear"},i.timeFrame.start+t.duration)}this.animationTimeLine.add({left:[l.left,s.left],top:[l.top,s.top],duration:t.duration,targets:a,easing:"linear"},i.timeFrame.start);break}case"slideOut":{let e=t.properties.direction,n={left:i.placement.x,top:i.placement.y},s={left:"left"===e?-i.placement.width:"right"===e?this.canvas?.width:i.placement.x,top:"top"===e?-100-i.placement.height:"bottom"===e?this.canvas?.height:i.placement.y};if(t.properties.useClipPath){let e=FabricUitls.getClipMaskRect(i,50);a.set("clipPath",e)}this.animationTimeLine.add({left:[n.left,s.left],top:[n.top,s.top],duration:t.duration,targets:a,easing:"linear"},i.timeFrame.end-t.duration);break}case"breathe":{let e=this.animations.find(e=>e.targetId===t.targetId&&"slideIn"===e.type),n=this.animations.find(e=>e.targetId===t.targetId&&"slideOut"===e.type),s=e?i.timeFrame.start+e.duration:i.timeFrame.start,l=n?i.timeFrame.end-n.duration:i.timeFrame.end;if(s>l)continue;let r=l-s,o=6e4/72*4,d=a.scaleX??1,c=a.scaleY??1,m=1.05*d,h=1.05*c,p=Math.floor(r/o);if(p<1)continue;let x=[];for(let e=0;e<p;e++)x.push({scaleX:m,scaleY:h}),x.push({scaleX:d,scaleY:c});this.animationTimeLine.add({duration:r,targets:a,keyframes:x,easing:"linear",loop:!0},s)}}}}removeAnimation(e){this.animations=this.animations.filter(t=>t.id!==e),this.refreshAnimations()}setSelectedElement(e){this.selectedElement=e,this.canvas&&(e?.fabricObject?this.canvas.setActiveObject(e.fabricObject):this.canvas.discardActiveObject())}updateSelectedElement(){this.selectedElement=this.editorElements.find(e=>e.id===this.selectedElement?.id)??null}setEditorElements(e){this.editorElements=e,this.updateSelectedElement(),this.refreshElements()}updateEditorElement(e){this.setEditorElements(this.editorElements.map(t=>t.id===e.id?e:t))}updateEditorElementTimeFrame(e,t){void 0!=t.start&&t.start<0&&(t.start=0),void 0!=t.end&&t.end>this.maxTime&&(t.end=this.maxTime);let i={...e,timeFrame:{...e.timeFrame,...t}};this.updateVideoElements(),this.updateAudioElements(),this.updateEditorElement(i),this.refreshAnimations()}addEditorElement(e){this.setEditorElements([...this.editorElements,e]),this.refreshElements(),this.setSelectedElement(this.editorElements[this.editorElements.length-1])}removeEditorElement(e){this.setEditorElements(this.editorElements.filter(t=>t.id!==e)),this.refreshElements()}setMaxTime(e){this.maxTime=e}setPlaying(e){this.playing=e,this.updateVideoElements(),this.updateAudioElements(),e&&(this.startedTime=Date.now(),this.startedTimePlay=this.currentTimeInMs,requestAnimationFrame(()=>{this.playFrames()}))}playFrames(){if(!this.playing)return;let e=Date.now()-this.startedTime,t=this.startedTimePlay+e;this.updateTimeTo(t),t>this.maxTime?(this.currentKeyFrame=0,this.setPlaying(!1)):requestAnimationFrame(()=>{this.playFrames()})}updateTimeTo(e){this.setCurrentTimeInMs(e),this.animationTimeLine.seek(e),this.canvas&&(this.canvas.backgroundColor=this.backgroundColor),this.editorElements.forEach(t=>{if(!t.fabricObject)return;let i=t.timeFrame.start<=e&&e<=t.timeFrame.end;t.fabricObject.visible=i})}handleSeek(e){this.playing&&this.setPlaying(!1),this.updateTimeTo(e),this.updateVideoElements(),this.updateAudioElements()}addVideo(e){let t=document.getElementById(`video-${e}`);if(!isHtmlVideoElement(t))return;let i=1e3*t.duration,a=t.videoWidth/t.videoHeight,n=getUid();this.addEditorElement({id:n,name:`Media(video) ${e+1}`,type:"video",placement:{x:0,y:0,width:100*a,height:100,rotation:0,scaleX:1,scaleY:1},timeFrame:{start:0,end:i},properties:{elementId:`video-${n}`,src:t.src,effect:{type:"none"}}})}addImage(e){let t=document.getElementById(`image-${e}`);if(!isHtmlImageElement(t))return;let i=t.naturalWidth/t.naturalHeight,a=getUid();this.addEditorElement({id:a,name:`Media(image) ${e+1}`,type:"image",placement:{x:0,y:0,width:100*i,height:100,rotation:0,scaleX:1,scaleY:1},timeFrame:{start:0,end:this.maxTime},properties:{elementId:`image-${a}`,src:t.src,effect:{type:"none"}}})}addAudio(e){let t=document.getElementById(`audio-${e}`);if(!isHtmlAudioElement(t))return;let i=1e3*t.duration,a=getUid();this.addEditorElement({id:a,name:`Media(audio) ${e+1}`,type:"audio",placement:{x:0,y:0,width:100,height:100,rotation:0,scaleX:1,scaleY:1},timeFrame:{start:0,end:i},properties:{elementId:`audio-${a}`,src:t.src}})}addText(e){let t=getUid(),i=this.editorElements.length;this.addEditorElement({id:t,name:`Text ${i+1}`,type:"text",placement:{x:0,y:0,width:100,height:100,rotation:0,scaleX:1,scaleY:1},timeFrame:{start:0,end:this.maxTime},properties:{text:e.text,fontSize:e.fontSize,fontWeight:e.fontWeight,splittedTexts:[]}})}updateVideoElements(){this.editorElements.filter(e=>"video"===e.type).forEach(e=>{let t=document.getElementById(e.properties.elementId);if(isHtmlVideoElement(t)){let i=(this.currentTimeInMs-e.timeFrame.start)/1e3;t.currentTime=i,this.playing?t.play():t.pause()}})}updateAudioElements(){this.editorElements.filter(e=>"audio"===e.type).forEach(e=>{let t=document.getElementById(e.properties.elementId);if(isHtmlAudioElement(t)){let i=(this.currentTimeInMs-e.timeFrame.start)/1e3;t.currentTime=i,this.playing?t.play():t.pause()}})}setVideoFormat(e){this.selectedVideoFormat=e}async saveCanvasToVideoWithAudio(){await this.saveCanvasToVideoWithAudioWebmMp4()}async saveCanvasToVideoWithAudioWebmMp4(){console.log("modified");let e="mp4"===this.selectedVideoFormat,t=document.getElementById("canvas"),i=t.captureStream(30),a=this.editorElements.filter(isEditorAudioElement),n=[],s=new AudioContext;a.forEach(e=>{let t=document.getElementById(e.properties.elementId),i=s.createMediaElementSource(t),a=s.createMediaStreamDestination();i.connect(a),i.connect(s.destination),n.push(a.stream)}),n.forEach(e=>{i.addTrack(e.getAudioTracks()[0])});let l=document.createElement("video");l.srcObject=i,l.height=500,l.width=800,l.play().then(()=>{let t=new MediaRecorder(i),a=[];t.ondataavailable=function(e){a.push(e.data),console.log("data available")},t.onstop=async function(){let t=new Blob(a,{type:"video/webm"});if(e){let e=new Uint8Array(await t.arrayBuffer()),i=new h.C,a="https://unpkg.com/@ffmpeg/core@0.12.2/dist/umd";await i.load({coreURL:await (0,p.Wn)(`${a}/ffmpeg-core.js`,"text/javascript"),wasmURL:await (0,p.Wn)(`${a}/ffmpeg-core.wasm`,"application/wasm")}),await i.writeFile("video.webm",e),await i.exec(["-y","-i","video.webm","-c:v","libx264","video.mp4"]);let n=await i.readFile("video.mp4"),s=new Blob([n],{type:"video/mp4"}),l=URL.createObjectURL(s),r=document.createElement("a");r.download="video.mp4",r.href=l,r.click()}else{let e=URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download="video.webm",i.click()}},t.start(),setTimeout(()=>{t.stop()},this.maxTime),l.remove()}).catch(e=>{console.error("Error playing video:",e)})}refreshElements(){let e=this;if(!e.canvas)return;let t=e.canvas;e.canvas.remove(...e.canvas.getObjects());for(let i=0;i<e.editorElements.length;i++){let a=e.editorElements[i];switch(a.type){case"video":{if(console.log("elementid",a.properties.elementId),null==document.getElementById(a.properties.elementId))continue;let i=document.getElementById(a.properties.elementId);if(!isHtmlVideoElement(i))continue;let s=new n.fabric.CoverVideo(i,{name:a.id,left:a.placement.x,top:a.placement.y,width:a.placement.width,height:a.placement.height,scaleX:a.placement.scaleX,scaleY:a.placement.scaleY,angle:a.placement.rotation,objectCaching:!1,selectable:!0,lockUniScaling:!0,customFilter:a.properties.effect.type});a.fabricObject=s,a.properties.imageObject=s,i.width=100,i.height=100*i.videoHeight/i.videoWidth,t.add(s),t.on("object:modified",function(t){if(!t.target)return;let i=t.target;if(i!=s)return;let n=a.placement,l={...n,x:i.left??n.x,y:i.top??n.y,rotation:i.angle??n.rotation,width:i.width&&i.scaleX?i.width*i.scaleX:n.width,height:i.height&&i.scaleY?i.height*i.scaleY:n.height,scaleX:1,scaleY:1},r={...a,placement:l};e.updateEditorElement(r)});break}case"image":{if(null==document.getElementById(a.properties.elementId))continue;let i=document.getElementById(a.properties.elementId);if(!isHtmlImageElement(i))continue;let s=new n.fabric.CoverImage(i,{name:a.id,left:a.placement.x,top:a.placement.y,angle:a.placement.rotation,objectCaching:!1,selectable:!0,lockUniScaling:!0,customFilter:a.properties.effect.type});a.fabricObject=s,a.properties.imageObject=s;let l={w:i.naturalWidth,h:i.naturalHeight};s.width=l.w,s.height=l.h,i.width=l.w,i.height=l.h,s.scaleToHeight(l.w),s.scaleToWidth(l.h);let r={x:a.placement.width/l.w,y:a.placement.height/l.h};s.scaleX=r.x*a.placement.scaleX,s.scaleY=r.y*a.placement.scaleY,t.add(s),t.on("object:modified",function(t){if(!t.target)return;let i=t.target;if(i!=s)return;let n=a.placement,l=1;i.scaleX&&i.scaleX>0&&(l=i.scaleX/r.x);let o={...n,x:i.left??n.x,y:i.top??n.y,rotation:i.angle??n.rotation,scaleX:l,scaleY:l},d={...a,placement:o};e.updateEditorElement(d)});break}case"audio":break;case"text":{let i=new n.fabric.Textbox(a.properties.text,{name:a.id,left:a.placement.x,top:a.placement.y,scaleX:a.placement.scaleX,scaleY:a.placement.scaleY,width:a.placement.width,height:a.placement.height,angle:a.placement.rotation,fontSize:a.properties.fontSize,fontWeight:a.properties.fontWeight,objectCaching:!1,selectable:!0,lockUniScaling:!0,fill:"#ffffff"});a.fabricObject=i,t.add(i),t.on("object:modified",function(t){if(!t.target)return;let n=t.target;if(n!=i)return;let s=a.placement,l={...s,x:n.left??s.x,y:n.top??s.y,rotation:n.angle??s.rotation,width:n.width??s.width,height:n.height??s.height,scaleX:n.scaleX??s.scaleX,scaleY:n.scaleY??s.scaleY},r={...a,placement:l,properties:{...a.properties,text:n?.text}};e.updateEditorElement(r)});break}default:throw Error("Not implemented")}a.fabricObject&&a.fabricObject.on("selected",function(t){e.setSelectedElement(a)})}let i=e.selectedElement;i&&i.fabricObject&&t.setActiveObject(i.fabricObject),this.refreshAnimations(),this.updateTimeTo(this.currentTimeInMs),e.canvas.renderAll()}};function isEditorAudioElement(e){return"audio"===e.type}function isEditorVideoElement(e){return"video"===e.type}function isEditorImageElement(e){return"image"===e.type}let x=(0,s.createContext)(new Store_Store);var u=i(88073);let f=(0,u.Pi)(()=>{let e=l().useContext(x);return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Export"}),(0,a.jsxs)("div",{className:"px-[16px]",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center my-2",children:[a.jsx("div",{className:"text-xs font-semibold mr-2",children:"Video Length:"}),a.jsx("input",{type:"number",className:"rounded text-center border-slate-200 placeholder-slate-400 contrast-more:border-slate-400 contrast-more:placeholder-slate-500 max-w-[50px] mr-2",value:e.maxTime/1e3,onChange:t=>{let i=t.target.value;e.setMaxTime(1e3*Number(i))}}),a.jsx("div",{children:"secs"})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center my-2",children:[a.jsx("div",{className:"text-xs font-semibold mr-2",children:"Canvas Resolution:"}),a.jsx("div",{className:"text-xs mr-2",children:"Todo"})]})]}),(0,a.jsxs)("div",{className:"px-[16px]",children:[a.jsx("div",{className:"text-xs font-semibold mr-2",children:"Video Format:"}),(0,a.jsxs)("div",{className:"flex flex-row items-center my-2",children:[a.jsx("input",{type:"radio",className:"mr-2",name:"video-format",value:"mp4",checked:"mp4"===e.selectedVideoFormat,onChange:t=>{e.setVideoFormat("mp4")}}),a.jsx("div",{className:"text-xs mr-2",children:"MP4"})]})]}),(0,a.jsxs)("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-1 rounded-lg m-4",onClick:()=>{if(e.maxTime<=0){console.error("Invalid video duration");return}if(!e.selectedVideoFormat){console.error("Invalid video format");return}e.handleSeek(0),e.setSelectedElement(null),setTimeout(()=>{e.setPlaying(!0),e.saveCanvasToVideoWithAudio()},1e3)},children:["Export Video (",e.maxTime/1e3," secs) ","mp4"===e.selectedVideoFormat?"ALPHA":""]})]})});var g=i(7625);let b={fadeIn:"Fade In",fadeOut:"Fade Out",slideIn:"Slide In",slideOut:"Slide Out",breath:"Breath"},v=(0,u.Pi)(e=>{let t=l().useContext(x);return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden items-center bg-slate-800 m-[15px] flex flex-col relative min-h-[100px] p-2",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between w-full",children:[a.jsx("div",{className:"text-white py-1 text-base text-left w-full",children:b[e.animation.type]}),a.jsx("button",{className:"hover:bg-[#00a0f5] bg-[rgba(0,0,0,.25)] rounded z-10 text-white font-bold py-1 text-lg",onClick:()=>t.removeAnimation(e.animation.id),children:a.jsx(g.ZkW,{size:"25"})})]}),"fadeIn"===e.animation.type||"fadeOut"===e.animation.type?a.jsx(w,{animation:e.animation}):null,"slideIn"===e.animation.type||"slideOut"===e.animation.type?a.jsx(y,{animation:e.animation}):null]})}),w=(0,u.Pi)(e=>{let t=l().useContext(x);return a.jsx("div",{className:"flex flex-col w-full items-start",children:(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between my-1",children:[a.jsx("div",{className:"text-white text-xs",children:"Duration(s)"}),a.jsx("input",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",type:"number",value:e.animation.duration/1e3,onChange:i=>{let a=1e3*Number(i.target.value),n=a>0?a:0;n<10&&(n=10),t.updateAnimation(e.animation.id,{...e.animation,duration:n})}})]})})}),y=(0,u.Pi)(e=>{let t=l().useContext(x);return(0,a.jsxs)("div",{className:"flex flex-col w-full items-start",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between my-1",children:[a.jsx("div",{className:"text-white text-xs",children:"Duration(s)"}),a.jsx("input",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",type:"number",value:e.animation.duration/1e3,onChange:i=>{let a=1e3*Number(i.target.value),n=a>0?a:0;n<10&&(n=10),t.updateAnimation(e.animation.id,{...e.animation,duration:n})}})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between my-1",children:[a.jsx("div",{className:"text-white text-xs",children:"Direction"}),(0,a.jsxs)("select",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",value:e.animation.properties.direction,onChange:i=>{t.updateAnimation(e.animation.id,{...e.animation,properties:{...e.animation.properties,direction:i.target.value}})},children:[a.jsx("option",{value:"left",children:"Left"}),a.jsx("option",{value:"right",children:"Right"}),a.jsx("option",{value:"top",children:"Top"}),a.jsx("option",{value:"bottom",children:"Bottom"})]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between my-1",children:[a.jsx("div",{className:"text-white text-xs",children:"Use Mask"}),a.jsx("input",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",type:"checkbox",checked:e.animation.properties.useClipPath,onChange:i=>{t.updateAnimation(e.animation.id,{...e.animation,properties:{...e.animation.properties,useClipPath:i.target.checked}})}})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between my-1",children:[a.jsx("div",{className:"text-white text-xs",children:"Type"}),(0,a.jsxs)("select",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",value:e.animation.properties.textType,onChange:i=>{t.updateAnimation(e.animation.id,{...e.animation,properties:{...e.animation.properties,textType:i.target.value}})},children:[a.jsx("option",{value:"none",children:"None"}),a.jsx("option",{value:"character",children:"Character"})]})]})]})}),j=(0,u.Pi)(()=>{let e=l().useContext(x),t=e.selectedElement,i=e.animations.filter(e=>e.targetId===t?.id),n=i.some(e=>"fadeIn"===e.type),s=i.some(e=>"fadeOut"===e.type),r=i.some(e=>"slideIn"===e.type),o=i.some(e=>"slideOut"===e.type),d=i.some(e=>"breathe"===e.type);return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Animations"}),t&&!n?a.jsx("div",{className:"text-sm px-[16px] py-[8px] font-semibold hover:bg-slate-700 hover:text-white cursor-pointer",onClick:()=>{e.addAnimation({id:getUid(),type:"fadeIn",targetId:t?.id??"",duration:1e3,properties:{}})},children:"Add Fade In"}):null,t&&!s?a.jsx("div",{className:"text-sm px-[16px] py-[8px] font-semibold hover:bg-slate-700 hover:text-white cursor-pointer",onClick:()=>{e.addAnimation({id:getUid(),type:"fadeOut",targetId:t?.id??"",duration:1e3,properties:{}})},children:"Add Fade Out"}):null,t&&!r?a.jsx("div",{className:"text-sm px-[16px] py-[8px] font-semibold hover:bg-slate-700 hover:text-white cursor-pointer",onClick:()=>{e.addAnimation({id:getUid(),type:"slideIn",targetId:t?.id??"",duration:1e3,properties:{direction:"left",useClipPath:!1,textType:"none"}})},children:"Add Slide In"}):null,t&&!o?a.jsx("div",{className:"text-sm px-[16px] py-[8px] font-semibold hover:bg-slate-700 hover:text-white cursor-pointer",onClick:()=>{e.addAnimation({id:getUid(),type:"slideOut",targetId:t?.id??"",duration:1e3,properties:{direction:"right",useClipPath:!1,textType:"none"}})},children:"Add Slide Out"}):null,t&&!d?a.jsx("div",{className:"text-sm px-[16px] py-[8px] font-semibold hover:bg-slate-700 hover:text-white cursor-pointer",onClick:()=>{e.addAnimation({id:getUid(),type:"breathe",targetId:t?.id??"",duration:1e3,properties:{}})},children:"Add Breathing"}):null,i.map(e=>a.jsx(v,{animation:e},e.id))]})}),E=(0,u.Pi)(({audio:e,index:t})=>{let i=l().useContext(x),n=l().useRef(null),[s,r]=l().useState("00:00");return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden items-center bg-slate-800 m-[15px] flex flex-col relative min-h-[100px]",children:[a.jsx("div",{className:"bg-[rgba(0,0,0,.25)] text-white py-1 absolute text-base top-2 right-2",children:s}),a.jsx("button",{className:"hover:bg-[#00a0f5] bg-[rgba(0,0,0,.25)] rounded z-10 text-white font-bold py-1 absolute text-lg bottom-2 right-2",onClick:()=>i.addAudio(t),children:a.jsx(g.x06,{size:"25"})}),a.jsx("audio",{onLoadedData:()=>{let e=n.current?.duration??0;r(formatTimeToMinSec(e))},ref:n,className:"max-h-[100px] max-w-[150px] min-h-[50px] min-w-[100px]",src:e,id:`audio-${t}`})]})}),UploadButton=e=>(0,a.jsxs)("label",{htmlFor:"fileInput",className:e.className,children:[a.jsx("input",{id:"fileInput",type:"file",accept:e.accept,className:"hidden",onChange:e.onChange}),"Upload"]}),C=(0,u.Pi)(()=>{let e=l().useContext(x);return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Audios"}),e.audios.map((e,t)=>a.jsx(E,{audio:e,index:t},e)),a.jsx(UploadButton,{accept:"audio/mp3,audio/*",className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold text-center mx-2 py-2 px-4 rounded cursor-pointer",onChange:t=>{let i=t.target.files?.[0];i&&e.addAudioResource(URL.createObjectURL(i))}})]})});var N=i(87796);let T=["#000000","#FFFFFF","#404040","#808080","#C0C0C0","#E0E0E0","#003366","#336699","#6699CC","#99CCFF","#990000","#CC3333","#FF6666","#663300","#996633","#CC9966","#006600","#339933","#66CC99","#FFFF00"],F=(0,u.Pi)(()=>{let e=l().useContext(x),[t,i]=(0,s.useState)(!1),handleColorClick=t=>{e.setBackgroundColor(t)},handleClickOutside=e=>{let t=document.getElementById("color-picker");t&&!t.contains(e.target)&&i(!1)};return l().useEffect(()=>(t?document.addEventListener("mousedown",handleClickOutside):document.removeEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}),[t]),(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Background Colour"}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(N.if,{colors:T,color:e.backgroundColor,onChangeComplete:e=>handleColorClick(e.hex)})}),(0,a.jsxs)("div",{className:"flex items-center justify-center mt-4",children:[a.jsx("button",{onClick:()=>{i(!0)},className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Pick a Color"}),t&&a.jsx("div",{id:"color-picker",style:{position:"absolute",zIndex:2},children:a.jsx(N.AI,{color:e.backgroundColor,onChangeComplete:e=>handleColorClick(e.hex)})})]})]})}),k=(0,u.Pi)(({image:e,index:t})=>{let i=l().useContext(x),n=l().useRef(null),[s,r]=l().useState({w:0,h:0});return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden items-center bg-slate-800 m-[15px] flex flex-col relative",children:[(0,a.jsxs)("div",{className:"bg-[rgba(0,0,0,.25)] text-white py-1 absolute text-base top-2 right-2",children:[s.w,"x",s.h]}),a.jsx("button",{className:"hover:bg-[#00a0f5] bg-[rgba(0,0,0,.25)] rounded z-10 text-white font-bold py-1 absolute text-lg bottom-2 right-2",onClick:()=>i.addImage(t),children:a.jsx(g.x06,{size:"25"})}),a.jsx("img",{onLoad:()=>{r({w:n.current?.naturalWidth??0,h:n.current?.naturalHeight??0})},ref:n,className:"max-h-[100px] max-w-[150px]",src:e,height:200,width:200,id:`image-${t}`})]})}),S=(0,u.Pi)(()=>{let e=l().useContext(x);return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Images"}),a.jsx(UploadButton,{accept:"image/*",className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold text-center mx-2 py-2 px-4 rounded cursor-pointer",onChange:t=>{let i=t.target.files?.[0];i&&e.addImageResource(URL.createObjectURL(i))}}),a.jsx("div",{children:e.images.map((e,t)=>a.jsx(k,{image:e,index:t},e))})]})}),I=(0,u.Pi)(({fontSize:e,fontWeight:t,sampleText:i})=>{let n=l().useContext(x);return(0,a.jsxs)("div",{className:"items-center m-[15px] flex flex-row",children:[a.jsx("div",{className:"flex-1 text-black px-2 py-1",style:{fontSize:`${e}px`,fontWeight:`${t}`},children:i}),a.jsx("button",{className:"h-[32px] w-[32px] hover:bg-black bg-[rgba(0,0,0,.25)] rounded z-10 text-white font-bold py-1 flex items-center justify-center",onClick:()=>n.addText({text:i,fontSize:e,fontWeight:t}),children:a.jsx(g.x06,{size:"25"})})]})}),M=[{name:"Title",fontSize:28,fontWeight:600},{name:"Subtitle",fontSize:16,fontWeight:600},{name:"Body",fontSize:14,fontWeight:400},{name:"Caption",fontSize:12,fontWeight:400},{name:"Heading 1",fontSize:24,fontWeight:800},{name:"Heading 2",fontSize:20,fontWeight:800},{name:"Heading 3",fontSize:18,fontWeight:800},{name:"Heading 4",fontSize:16,fontWeight:800},{name:"Heading 5",fontSize:14,fontWeight:800},{name:"Heading 6",fontSize:12,fontWeight:800}],O=(0,u.Pi)(()=>(0,a.jsxs)("div",{className:"bg-slate-200 h-full",children:[a.jsx("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold text-black",children:"Text"}),a.jsx("ul",{children:M.map(e=>a.jsx("li",{children:a.jsx(I,{sampleText:e.name,fontSize:e.fontSize,fontWeight:e.fontWeight})},e.name))})]})),A=(0,u.Pi)(({video:e,index:t})=>{let i=l().useContext(x),n=l().useRef(null),[s,r]=l().useState("00:00");return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden items-center bg-slate-800 m-[15px] flex flex-col relative",children:[a.jsx("div",{className:"bg-[rgba(0,0,0,.25)] text-white py-1 absolute text-base top-2 right-2",children:s}),a.jsx("button",{className:"hover:bg-[#00a0f5] bg-[rgba(0,0,0,.25)] rounded z-10 text-white font-bold py-1 absolute text-lg bottom-2 right-2",onClick:()=>i.addVideo(t),children:a.jsx(g.x06,{size:"25"})}),a.jsx("video",{onLoadedData:()=>{let e=n.current?.duration??0;r(formatTimeToMinSec(e))},ref:n,className:"max-h-[150px] max-w-[150px]",src:e,height:200,width:200,id:`video-${t}`})]})}),z=(0,u.Pi)(()=>{let e=l().useContext(x);return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Videos"}),e.videos.map((e,t)=>a.jsx(A,{video:e,index:t},e)),a.jsx(UploadButton,{accept:"video/mp4,video/x-m4v,video/*",className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold text-center mx-2 py-2 px-4 rounded cursor-pointer",onChange:t=>{let i=t.target.files?.[0];i&&e.addVideoResource(URL.createObjectURL(i))}})]})}),W={blackAndWhite:"Black and White",none:"None",saturate:"Saturate",sepia:"Sepia",invert:"Invert"},P=(0,u.Pi)(e=>{let t=l().useContext(x);return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden items-center bg-slate-800 m-[15px] flex flex-col relative min-h-[100px] p-2",children:[a.jsx("div",{className:"flex flex-row justify-between w-full",children:a.jsx("div",{className:"text-white py-1 text-base text-left w-full",children:W[e.editorElement.properties.effect.type]})}),a.jsx("select",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",value:e.editorElement.properties.effect.type,onChange:i=>{let a=i.target.value;t.updateEffect(e.editorElement.id,{type:a})},children:Object.keys(W).map(e=>a.jsx("option",{value:e,children:W[e]},e))})]})}),L=(0,u.Pi)(()=>{let e=l().useContext(x),t=e.selectedElement;return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Effects"}),t&&(isEditorImageElement(t)||isEditorVideoElement(t))?a.jsx(P,{editorElement:t}):null]})}),V=(0,u.Pi)(()=>{let e=l().useContext(x),t=e.selectedMenuOption;return(0,a.jsxs)("div",{className:"bg-slate-200 h-full",children:["Video"===t?a.jsx(z,{}):null,"Audio"===t?a.jsx(C,{}):null,"Image"===t?a.jsx(S,{}):null,"Text"===t?a.jsx(O,{}):null,"Animation"===t?a.jsx(j,{}):null,"Effect"===t?a.jsx(L,{}):null,"Export"===t?a.jsx(f,{}):null,"Fill"===t?a.jsx(F,{}):null]})}),U=(0,u.Pi)(e=>{let t=l().useContext(x),{element:i}=e,n="video"===i.type?g.laJ:g.FxN,s=t.selectedElement?.id===i.id,r=s?"rgba(0, 160, 245, 0.1)":"";return(0,a.jsxs)("div",{style:{backgroundColor:r},className:`flex mx-2 my-1 py-2 px-1 flex-row justify-start items-center ${r}`,onClick:()=>{t.setSelectedElement(i)},children:[a.jsx(n,{size:"20",color:"gray"}),a.jsx("div",{className:"truncate text-xs ml-2 flex-1 font-medium",children:i.name}),(0,a.jsxs)("div",{children:["video"===i.type?a.jsx("video",{className:"opacity-0 max-w-[20px] max-h-[20px]",src:i.properties.src,onLoad:()=>{t.refreshElements()},onLoadedData:()=>{t.refreshElements()},height:20,width:20,id:i.properties.elementId}):null,"image"===i.type?a.jsx("img",{className:"opacity-0 max-w-[20px] max-h-[20px]",src:i.properties.src,onLoad:()=>{t.refreshElements()},onLoadedData:()=>{t.refreshElements()},height:20,width:20,id:i.properties.elementId}):null,"audio"===i.type?a.jsx("audio",{className:"opacity-0 max-w-[20px] max-h-[20px]",src:i.properties.src,onLoad:()=>{t.refreshElements()},onLoadedData:()=>{t.refreshElements()},id:i.properties.elementId}):null]}),a.jsx("button",{className:"bg-red-500 hover:bg-red-700 text-white mr-2 text-xs py-0 px-1 rounded",onClick:e=>{t.removeEditorElement(i.id),t.refreshElements(),e.preventDefault(),e.stopPropagation()},children:"X"})]},i.id)}),X=(0,u.Pi)(e=>{let t=l().useContext(x);return(0,a.jsxs)("div",{className:"bg-slate-200 h-full overflow-scroll",children:[a.jsx("div",{className:"flex flex-row justify-between",children:a.jsx("div",{className:"text-sm px-[16px] py-[7px] font-semibold",children:"Elements"})}),a.jsx("div",{className:"flex flex-col",children:t.editorElements.map(e=>a.jsx(U,{element:e},e.id))})]})}),R=(0,u.Pi)(()=>{let e=l().useContext(x);return a.jsx("ul",{className:"bg-white h-full",children:H.map(t=>{let i=e.selectedMenuOption===t.name;return a.jsx("li",{className:`h-[72px] w-[72px] flex flex-col items-center justify-center ${i?"bg-slate-200":""}`,children:(0,a.jsxs)("button",{onClick:()=>t.action(e),className:"flex flex-col items-center",children:[a.jsx(t.icon,{size:"20",color:i?"#000":"#444"}),a.jsx("div",{className:`text-[0.6rem] hover:text-black ${i?"text-black":"text-slate-600"}`,children:t.name})]})},t.name)})})}),H=[{name:"Video",icon:g.dnC,action:e=>{e.setSelectedMenuOption("Video")}},{name:"Audio",icon:g.ibD,action:e=>{e.setSelectedMenuOption("Audio")}},{name:"Image",icon:g.e0s,action:e=>{e.setSelectedMenuOption("Image")}},{name:"Text",icon:g.SQS,action:e=>{e.setSelectedMenuOption("Text")}},{name:"Animation",icon:g.mi9,action:e=>{e.setSelectedMenuOption("Animation")}},{name:"Effect",icon:g._9Q,action:e=>{e.setSelectedMenuOption("Effect")}},{name:"Fill",icon:g.Yu2,action:e=>{e.setSelectedMenuOption("Fill")}},{name:"Export",icon:g.uKn,action:e=>{e.setSelectedMenuOption("Export")}}];var $=i(17757);let ScaleRangeInput=e=>{let{max:t,value:i,onChange:n}=e,l=(0,s.useRef)(null),r=(0,s.useRef)(!1),[o,d]=(0,s.useState)({width:50,height:e.height});(0,s.useEffect)(()=>{let handleResize=()=>{l.current&&d({width:l.current.parentElement?.clientWidth??50,height:l.current.parentElement?.clientHeight??e.height})};return window.addEventListener("resize",handleResize),handleResize(),()=>{window.removeEventListener("resize",handleResize)}},[]),(0,s.useEffect)(()=>{if(l.current){let i=l.current;i.width=o.width,i.height=o.height;let a=i.getContext("2d");a&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,i.width,i.height),e.markings.forEach(e=>{a.strokeStyle=e.color,a.lineWidth=e.width,a.beginPath();for(let n=0;n<t;n+=e.interval)a.moveTo(n/t*i.width,0),a.lineTo(n/t*i.width,e.size);a.stroke()}))}},[e.markings,e.backgroundColor,t,o]);let updateFromMouseEvent=e=>{let i=l.current?.getBoundingClientRect();if(i){let a=e.clientX-i.left,s=a/o.width*t,l=Math.min(t,Math.max(0,s));n(l)}};return(0,a.jsxs)("div",{className:"relative w-full",onMouseDown:e=>{r.current=!0,updateFromMouseEvent(e)},onMouseUp:e=>{r.current=!1},onMouseMove:e=>{r.current&&updateFromMouseEvent(e)},onMouseLeave:e=>{r.current=!1},children:[a.jsx("canvas",{height:e.height,ref:l}),a.jsx("div",{className:"rounded-full bg-black w-[4px] absolute top-0 left-0",style:{height:`${e.height}px`,transform:`translateX(${i/t*o.width}px) translateX(-2px)`}})]})},B=[{interval:5e3,color:"black",size:16,width:1},{interval:1e3,color:"black",size:8,width:1}],D=(0,$.observer)(e=>{let t=(0,s.useContext)(x),i=t.playing?g.hPq:g.Nhx,n=formatTimeToMinSecMili(t.currentTimeInMs),l=formatTimeToMinSecMili(t.maxTime);return(0,a.jsxs)("div",{className:"seek-player flex flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center px-2",children:[a.jsx("button",{className:"w-[80px] rounded  px-2 py-2",onClick:()=>{t.setPlaying(!t.playing)},children:a.jsx(i,{size:"40"})}),a.jsx("span",{className:"font-mono",children:n}),a.jsx("div",{className:"w-[1px] h-[25px] bg-slate-300 mx-[10px]"}),a.jsx("span",{className:"font-mono",children:l})]}),a.jsx(ScaleRangeInput,{max:t.maxTime,value:t.currentTimeInMs,onChange:e=>{t.handleSeek(e)},height:30,markings:B,backgroundColor:"white"})]})}),timeline_related_DragableView=function(e){let t=(0,s.useRef)({div:null,isDragging:!1,initialMouseX:0}),{current:i}=t;function calculateNewValue(t){if(!i.div)return 0;let a=t-i.initialMouseX,n=a/i.div.parentElement.clientWidth*e.total;return e.value+n}let handleMouseMove=t=>{i.div&&i.isDragging&&(i.div.style.left=`${calculateNewValue(t.clientX)/e.total*100}%`,t.stopPropagation(),t.preventDefault())},handleMouseUp=t=>{i.div&&i.isDragging&&(i.isDragging=!1,e.onChange(calculateNewValue(t.clientX)),t.stopPropagation(),t.preventDefault())};return(0,s.useEffect)(()=>(window.addEventListener("mouseup",handleMouseUp),window.addEventListener("mousemove",handleMouseMove),()=>{window.removeEventListener("mouseup",handleMouseUp),window.removeEventListener("mousemove",handleMouseMove)}),[handleMouseUp,handleMouseMove]),a.jsx("div",{ref:e=>{i.div=e},className:`absolute height-100 ${e.className}`,style:{left:e.value/e.total*100+"%",top:0,bottom:0,...e.style},onMouseDown:t=>{i.div&&(e.disabled||(i.isDragging=!0,i.initialMouseX=t.clientX))},children:e.children})},Y=(0,u.Pi)(e=>{let t=l().useContext(x),{element:i}=e,n="audio"===i.type,s=t.selectedElement?.id===i.id,r=n?"cursor-no-drop":"cursor-ew-resize";return(0,a.jsxs)("div",{onClick:()=>{t.setSelectedElement(i)},className:`relative width-full h-[25px] my-2 ${s?"border-2 border-indigo-600 bg-slate-200":""}`,children:[a.jsx(timeline_related_DragableView,{className:"z-10",value:i.timeFrame.start,total:t.maxTime,disabled:n,onChange:e=>{t.updateEditorElementTimeFrame(i,{start:e})},children:a.jsx("div",{className:`bg-white border-2 border-blue-400 w-[10px] h-[10px] mt-[calc(25px/2)] translate-y-[-50%] transform translate-x-[-50%] ${r}`})}),a.jsx(timeline_related_DragableView,{className:n?"cursor-no-drop":"cursor-col-resize",value:i.timeFrame.start,disabled:n,style:{width:`${(i.timeFrame.end-i.timeFrame.start)/t.maxTime*100}%`},total:t.maxTime,onChange:e=>{let{start:a,end:n}=i.timeFrame;t.updateEditorElementTimeFrame(i,{start:e,end:e+(n-a)})},children:a.jsx("div",{className:`${s?"bg-slate-800":"bg-slate-600"} h-full w-full text-white text-xs min-w-[0px] px-2 leading-[25px]`,children:i.name})}),a.jsx(timeline_related_DragableView,{className:"z-10",disabled:n,value:i.timeFrame.end,total:t.maxTime,onChange:e=>{t.updateEditorElementTimeFrame(i,{end:e})},children:a.jsx("div",{className:`bg-white border-2 border-blue-400 w-[10px] h-[10px] mt-[calc(25px/2)] translate-y-[-50%] transform translate-x-[-50%] ${r}`})})]},i.id)}),_=(0,u.Pi)(()=>{let e=l().useContext(x),t=e.currentTimeInMs/e.maxTime*100;return(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx(D,{}),(0,a.jsxs)("div",{className:"flex-1 relative ",children:[e.editorElements.map(e=>a.jsx(Y,{element:e},e.id)),a.jsx("div",{className:"w-[2px] bg-red-400 absolute top-0 bottom-0 z-20",style:{left:`${t}%`}})]})]})}),EditorWithStore=()=>{let[e]=(0,s.useState)(new Store_Store);return a.jsx(x.Provider,{value:e,children:a.jsx(q,{})})},q=(0,u.Pi)(()=>{let e=l().useContext(x);return(0,s.useEffect)(()=>{let t=new n.fabric.Canvas("canvas",{height:500,width:800,backgroundColor:"#ededed"});n.fabric.Object.prototype.transparentCorners=!1,n.fabric.Object.prototype.cornerColor="#00a0f5",n.fabric.Object.prototype.cornerStyle="circle",n.fabric.Object.prototype.cornerStrokeColor="#0063d8",n.fabric.Object.prototype.cornerSize=10,t.on("mouse:down",function(t){t.target||e.setSelectedElement(null)}),e.setCanvas(t),n.fabric.util.requestAnimFrame(function render(){t.renderAll(),n.fabric.util.requestAnimFrame(render)})},[]),(0,a.jsxs)("div",{className:"grid grid-rows-[500px_1fr_20px] grid-cols-[72px_300px_1fr_250px] h-[100svh]",children:[a.jsx("div",{className:"tile row-span-2 flex flex-col",children:a.jsx(R,{})}),a.jsx("div",{className:"row-span-2 flex flex-col overflow-scroll",children:a.jsx(V,{})}),a.jsx("div",{id:"grid-canvas-container",className:"col-start-3 bg-slate-100 flex justify-center items-center",children:a.jsx("canvas",{id:"canvas",className:"h-[500px] w-[800px] row"})}),a.jsx("div",{className:"col-start-4 row-start-1",children:a.jsx(X,{})}),a.jsx("div",{className:"col-start-3 row-start-2 col-span-2 relative px-[10px] py-[4px] overflow-scroll",children:a.jsx(_,{})}),a.jsx("div",{className:"col-span-4 text-right px-2 text-[0.5em] bg-black text-white",children:"Crafted By Hassan Tariq"})]})})}};